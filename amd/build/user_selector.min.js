/**
 * User selector for accommodations.
 *
 * @module     local_accommodations/user_selector
 * @copyright  2025 Your Name <your.email@example.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_accommodations/user_selector",["jquery","core/ajax","core/str","core/notification"],(function($,Ajax,Str,Notification){return{init:function(){var searchInput=$("#accommodation-user-search"),resultsContainer=$("#accommodation-user-results"),selectedUserField=$("#accommodation-selected-userid");if(0!==searchInput.length){var courseId=$('input[name="courseid"]').val()||0,categoryId=$('input[name="categoryid"]').val()||0;searchInput.on("keyup",(function(){var searchTerm=$(this).val().trim();searchTerm.length<3?resultsContainer.empty():function(searchTerm,courseId,categoryId){return Ajax.call([{methodname:"core_user_search_identity",args:{query:searchTerm,courseid:courseId>0?courseId:void 0,categoryId:courseId>0?categoryId:void 0}}])[0]}(searchTerm,courseId,categoryId).then((function(users){!function(users){resultsContainer.empty(),0===users.length&&Str.get_string("nousersmatching","local_accommodations",searchInput.val()).then((function(message){resultsContainer.html('<div class="alert alert-info">'+message+"</div>")})).catch(Notification.exception);var resultsList=$('<ul class="list-group user-search-results"></ul>');users.forEach((function(user){var listItem=$('<li class="list-group-item user-result" data-id="'+user.id+'"><img src="'+user.profileimageurlsmall+'" class="user-picture mr-2" alt="" />'+user.fullname+" ("+user.email+")</li>");resultsList.append(listItem)})),resultsContainer.append(resultsList),$(".user-result").on("click",(function(){var userId=$(this).data("id"),userName=$(this).text();selectedUserField.val(userId),searchInput.val(userName),resultsContainer.empty(),searchInput.closest("form").submit()}))}(users)})).catch(Notification.exception)}))}}}}));

//# sourceMappingURL=user_selector.min.js.map